{% extends 'base.html' %}
{% block content %}
<div class="text">
<h2>Posts</h2>
    {% for post in posts %}
      <div class="post">
        <img src="{{ url_for('static', filename='images/businesses/' + post.business.image_filename) if post.business.image_filename else app_config['DEFAULT_BUSINESS_IMAGE_URL'] }}" alt="Business Image" class="profile-image" onclick="enlargeImage(this.src)">
        
        <h3 style="display: inline-block; font-size: 45px;"><a href="{{ url_for('business.business_profile', business_id=post.business_id) }}">{{ post.business.business_name }}</a></h3>
        <h4>{{ post.title }}</h4>
        <p>{{ post.content }}</p>
        {% if post.image_filename %}
          <img class="post-image" src="{{ url_for('static', filename='images/posts/' + post.image_filename) }}" alt="Post Image" onclick="enlargeImage(this.src)">
        {% endif %}
        <p>Likes: {{ post.engagements | selectattr('engagement_type', 'equalto', 'like') | list | length }}</p>
        <p>Comments: {{ post.engagements | selectattr('engagement_type', 'equalto', 'comment') | list | length }}</p>
        <p><a href="{{ url_for('post.post_detail', post_id=post.id) }}">View Post</a></p>
        <p>{{ post.created_at }}</p>
      </div>
    {% endfor %}
</div>
{% endblock %}